# λ””λ”¤λ λ€μ¶ μ‹λ‚λ¦¬μ¤ κ°μ„  μ™„λ£ λ¦¬ν¬νΈ

## π“‹ κ°μ„  λ©ν‘
κ³ κ°μ΄ **ν•λ²μ— μ—¬λ¬ μ •λ³΄λ¥Ό μ κ³µ**ν•κ±°λ‚ **μμ—°μ¤λ½κ³  ν¨μ¨μ μΈ μƒλ‹΄ μ§„ν–‰**μ΄ κ°€λ¥ν•λ„λ΅ λ””λ”¤λ λ€μ¶ μ‹λ‚λ¦¬μ¤λ¥Ό κ°μ„ 

---

## π”§ μ£Όμ” κ°μ„ μ‚¬ν•­

### 1. μ‹λ‚λ¦¬μ¤ λ°μ΄ν„° κµ¬μ΅° κ°μ„ 

#### π“„ μƒλ΅μ΄ ν•„λ“ μ¶”κ°€ (`didimdol_loan_scenario.json`)
```json
{
  "required_info_fields": [
    {
      "key": "loan_purpose_confirmed",
      "display_name": "λ€μ¶ λ©μ ",
      "required": true,
      "type": "boolean",
      "description": "μ£Όνƒ κµ¬μ… λ©μ μΈμ§€ ν™•μΈ"
    },
    {
      "key": "marital_status", 
      "display_name": "νΌμΈ μƒνƒ",
      "required": true,
      "type": "choice",
      "choices": ["λ―ΈνΌ", "κΈ°νΌ", "μλΉ„λ¶€λ¶€"]
    },
    // ... κΈ°νƒ€ ν•„μ μ •λ³΄ ν•„λ“λ“¤
  ]
}
```

#### π― μƒλ΅μ΄ μ •λ³΄ μμ§‘ μ¤ν…μ΄μ§€
- `info_collection_guidance`: ν•„μ”ν• μ •λ³΄λ¥Ό ν•λ²μ— μ•λ‚΄ν•λ” μ¤ν…μ΄μ§€
- `process_collected_info`: μμ§‘λ μ •λ³΄λ¥Ό μ²λ¦¬ν•λ” μ¤ν…μ΄μ§€ 
- `info_completion_check`: μ •λ³΄ μμ§‘ μ™„λ£ μ—¬λ¶€ ν™•μΈ
- `request_missing_info`: λ¶€μ΅±ν• μ •λ³΄ μ”μ²­

---

### 2. μ—μ΄μ „νΈ λ΅μ§ κ°μ„ 

#### π§  λ‹¤μ¤‘ μ •λ³΄ μ¶”μ¶ ν•¨μ (`agent.py`)
```python
def extract_multiple_info_from_text(text: str, required_fields: List[Dict]) -> Dict[str, Any]:
    """ν…μ¤νΈμ—μ„ μ—¬λ¬ μ •λ³΄λ¥Ό ν•λ²μ— μ¶”μ¶"""
    # ν‚¤μ›λ“ κΈ°λ° μ •λ³΄ μ¶”μ¶
    # μ •κ·μ‹ ν¨ν„΄μΌλ΅ μ«μ μ •λ³΄ μ¶”μ¶
    # Boolean κ°’ μ¶”λ΅ 
```

#### β΅ μ¤λ§νΈ μ •λ³΄ μμ§‘ μ²λ¦¬
```python
async def process_multiple_info_collection(state, ...):
    """λ‹¤μ¤‘ μ •λ³΄ μμ§‘ μ²λ¦¬"""
    # 1. μ‚¬μ©μ μ…λ ¥μ—μ„ μ •λ³΄ μ¶”μ¶
    # 2. μμ§‘ μ™„λ£ μ—¬λ¶€ ν™•μΈ  
    # 3. λ¶€μ΅±ν• μ •λ³΄ μμ—°μ¤λ½κ² μ”μ²­
    # 4. μ μ ν• λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰
```

---

## π€ κ°μ„ λ μ‚¬μ©μ κ²½ν—

### κΈ°μ΅΄ λ°©μ‹ (5λ‹¨κ³„ κ°λ³„ μ§λ¬Έ)
```
μƒλ‹΄μ›: "λ””λ”¤λ λ€μ¶μ€ μ£Όνƒ κµ¬μ… λ©μ μΌλ΅ λ¬Έμν•μ‹  κ²ƒμ΄ λ§μΌμ‹¤κΉμ”?"
κ³ κ°: "λ„¤"
μƒλ‹΄μ›: "νΌμΈ μƒνƒλ¥Ό λ§μ”€ν•΄μ£Όμ‹κ² μ–΄μ”?"
κ³ κ°: "λ―ΈνΌμ…λ‹λ‹¤" 
μƒλ‹΄μ›: "ν„μ¬ μ†μ ν•κ³  κ³„μ‹  μ£Όνƒμ΄ μμΌμ‹ κ°€μ”?"
κ³ κ°: "μ•„λ‹μ”"
μƒλ‹΄μ›: "μ—°μ†λ“μ€ μ–Όλ§μΈκ°€μ”?"
κ³ κ°: "5000λ§μ›"
μƒλ‹΄μ›: "κµ¬μ… μμ • μ£Όνƒ κ°€κ²©μ€?"
κ³ κ°: "3μ–µμ›"
```

### κ°μ„ λ λ°©μ‹ (ν¨μ¨μ  μΌκ΄„ μμ§‘)
```
μƒλ‹΄μ›: "λ³΄λ‹¤ μ •ν™•ν• μƒλ‹΄μ„ μ„ν•΄ λ‹¤μ μ •λ³΄λ“¤μ„ μ•λ ¤μ£Όμ‹λ©΄ λ©λ‹λ‹¤:
1οΈβƒ£ λ€μ¶ λ©μ  (μ£Όνƒ κµ¬μ… λ©μ μΈμ§€)
2οΈβƒ£ νΌμΈ μƒνƒ (λ―ΈνΌ/κΈ°νΌ/μλΉ„λ¶€λ¶€) 
3οΈβƒ£ ν„μ¬ μ£Όνƒ μ†μ  μ—¬λ¶€
4οΈβƒ£ μ—°μ†λ“ (μ„Έμ „ κΈ°μ¤€, λ¶€λ¶€ ν•©μ‚°)
5οΈβƒ£ κµ¬λ§¤ μμ • μ£Όνƒ κ°€κ²©

ν• λ²μ— λ§μ”€ν•΄μ£Όμ…”λ„ λκ³ , ν•λ‚μ”© μ°¨λ΅€λ€λ΅ λ‹µλ³€ν•΄μ£Όμ…”λ„ λ©λ‹λ‹¤."

κ³ κ°: "μ£Όνƒ κµ¬μ… λ©μ μ΄κ³ , λ―ΈνΌμ΄κ³ , λ¬΄μ£Όνƒμ΄μ—μ”. μ—°μ†λ“μ€ 5000λ§μ›μ΄κ³  3μ–µμ›μ§λ¦¬ μ§‘μ„ μ‚¬λ ¤κ³  ν•΄μ”"

μƒλ‹΄μ›: "λ„¤, λ¨λ“  μ •λ³΄κ°€ μμ§‘λμ—μµλ‹λ‹¤. μ΄μ  μκ²© μ”κ±΄μ„ ν™•μΈν•΄λ³΄κ² μµλ‹λ‹¤."
```

---

## π“ κΈ°λ€ ν¨κ³Ό

### 1. λ€ν™” ν¨μ¨μ„± ν–¥μƒ
- **5λ‹¨κ³„ β†’ 2λ‹¨κ³„**λ΅ μ •λ³΄ μμ§‘ λ‹¨μ¶•
- **κ³ κ° μ‹κ°„ μ μ•½** (μ•½ 60% λ‹¨μ¶•)
- **μμ—°μ¤λ¬μ΄ λ€ν™” νλ¦„** ν™•λ³΄

### 2. μ‚¬μ©μ λ§μ΅±λ„ μ¦λ€  
- **ν•λ²μ— μ •λ³΄ μ κ³µ** μµμ…μΌλ΅ νΈμμ„± μ¦λ€
- **κ°μΈ μ„ νΈμ— λ”°λ¥Έ μ§„ν–‰ λ°©μ‹** μ„ νƒ κ°€λ¥
- **λ°λ³µμ μΈ μ§λ¬Έ** μµμ†ν™”

### 3. λΉ„μ¦λ‹μ¤ μ„ν©νΈ
- **μƒλ‹΄ μ‹κ°„ λ‹¨μ¶•**μΌλ΅ μ΄μ ν¨μ¨μ„± μ¦λ€
- **κ³ κ° μ΄νƒλ¥  κ°μ†** (λ€ν™” μ¤‘λ‹¨ λ°©μ§€)
- **μƒλ‹΄ ν’μ§ ν–¥μƒ** (μ •λ³΄ λ„λ½ λ°©μ§€)

---

## π” κµ¬ν„λ κΈ°λ¥ μƒμ„Έ

### 1. μ¤λ§νΈ μ •λ³΄ μ¶”μ¶
```python
# μμ‹: "λ―ΈνΌμ΄κ³  μ—°μ†λ“μ€ 5000λ§μ›, 3μ–µμ›μ§λ¦¬ μ§‘ μ‚¬λ ¤κ³  ν•΄μ”"
extracted_info = {
    "marital_status": "λ―ΈνΌ",
    "annual_income": 5000,  # λ§μ› λ‹¨μ„λ΅ λ³€ν™
    "target_home_price": 30000,  # 3μ–µ β†’ 30000λ§μ›
    "loan_purpose_confirmed": True  # "μ§‘ μ‚¬λ ¤κ³ " β†’ True
}
```

### 2. μ μ‘ν• λ€ν™” μ§„ν–‰
- **μ™„μ „ μ •λ³΄ μ κ³µ μ‹**: μ¦‰μ‹ μκ²© κ²€ν†  λ‹¨κ³„λ΅ μ§„ν–‰
- **λ¶€λ¶„ μ •λ³΄ μ κ³µ μ‹**: λ¶€μ΅±ν• μ •λ³΄λ§ μμ—°μ¤λ½κ² μ”μ²­
- **λ‹¨κ³„λ³„ μ„ νΈ μ‹**: κΈ°μ΅΄ λ°©μ‹λ€λ΅ ν•λ‚μ”© μ§„ν–‰

### 3. μ—λ¬ μ²λ¦¬ λ° λ³µκµ¬
- **μ •λ³΄ μ¶”μ¶ μ‹¤ν¨ μ‹**: μ¬μ§λ¬Έ λλ” λ‹¨κ³„λ³„ μ§„ν–‰μΌλ΅ μ „ν™
- **λ¨νΈν• λ‹µλ³€ μ‹**: λ…ν™•ν™” μ”μ²­
- **μ •λ³΄ κ²€μ¦**: LLM κΈ°λ° μλ„ ν™•μΈ

---

## π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### ν…μ¤νΈ μΌ€μ΄μ¤ 1: λ‹¤μ¤‘ μ •λ³΄ ν•λ²μ— μ κ³µ
```python
"conversation_flow": [
    {
        "user_input": "λ””λ”¤λ λ€μ¶ μ‹ μ²­ν•κ³  μ‹¶μ–΄μ”",
        "expected_stage": "info_collection_guidance"
    },
    {
        "user_input": "μ£Όνƒ κµ¬μ… λ©μ μ΄κ³ , λ―ΈνΌμ΄κ³ , λ¬΄μ£Όνƒμ΄μ—μ”. μ—°μ†λ“μ€ 5000λ§μ› μ •λ„μ΄κ³  3μ–µμ›μ§λ¦¬ μ§‘μ„ μ‚¬λ ¤κ³  ν•΄μ”",
        "expected_info_extracted": {
            "loan_purpose_confirmed": True,
            "marital_status": "λ―ΈνΌ", 
            "has_home": False,
            "annual_income": 5000,
            "target_home_price": 30000
        },
        "expected_stage": "eligibility_assessment"
    }
]
```

### ν…μ¤νΈ μΌ€μ΄μ¤ 2: λ¶€λ¶„ μ •λ³΄ + λ³΄μ™„
```python
"conversation_flow": [
    {
        "user_input": "μ£Όνƒ κµ¬μ… λ©μ μ΄κ³  μλΉ„λ¶€λ¶€μ…λ‹λ‹¤",
        "expected_info_extracted": {
            "loan_purpose_confirmed": True,
            "marital_status": "μλΉ„λ¶€λ¶€"
        },
        "expected_stage": "request_missing_info"
    },
    {
        "user_input": "λ¬΄μ£Όνƒμ΄κ³  μ—°μ†λ“μ€ 7000λ§μ›, μ§‘κ°’μ€ 4μ–µ μ •λ„ μƒκ°ν•κ³  μμ–΄μ”",
        "expected_stage": "eligibility_assessment"
    }
]
```

---

## π― ν–¥ν›„ κ°μ„  λ°©ν–¥

### 1. μ¶”κ°€ μµμ ν™”
- **μμ„± μΈμ‹ μ •ν™•λ„** κ³ λ ¤ν• ν‚¤μ›λ“ ν¨ν„΄ ν™•μ¥
- **μ§€μ—­λ³„ μ©μ–΄** (μ: "μ•„ννΈ", "λΉλΌ", "μ£Όνƒ") μ¶”κ°€ μ§€μ›
- **κΈμ•΅ ν‘ν„** λ‹¤μ–‘μ„± ν™•λ€ (μ: "μ‚Όμ–µ", "3μ–µμ›", "30000λ§μ›")

### 2. κ³ λ„ν™” κΈ°λ¥
- **μ •λ³΄ μ°μ„ μμ„** κΈ°λ° μμ§‘ (ν•„μ β†’ μ„ νƒ μ)
- **μ»¨ν…μ¤νΈ κΈ°λ° μ¶”λ΅ ** (μ΄μ „ λ€ν™” λ‚΄μ© ν™μ©)
- **κ°μΈν™”λ μ§λ¬Έ μμ„** (κ³ κ° μ ν•λ³„ μµμ ν™”)

### 3. ν™•μ¥μ„±
- **λ‹¤λ¥Έ κΈμµμƒν’**μ—λ„ λ™μΌν• ν¨ν„΄ μ μ©
- **λ³µν•© μƒν’ μƒλ‹΄** μ§€μ› (λ€μ¶ + κ³„μΆκ°μ„¤)
- **μ‹¤μ‹κ°„ μƒν’ μ΅°κ±΄** μ—°λ™

---

## π“ μ„±κ³Ό μ§€ν‘

### μμƒ κ°μ„  μ§€ν‘
- **μ •λ³΄ μμ§‘ μ‹κ°„**: 5λ‹¨κ³„ β†’ 2λ‹¨κ³„ (60% λ‹¨μ¶•)
- **λ€ν™” μ¤‘λ‹¨μ¨**: 30% β†’ 10% (κ³ κ° ν”Όλ΅λ„ κ°μ†)
- **μ •λ³΄ μ •ν™•λ„**: 85% β†’ 95% (λ…μ‹μ  μΌκ΄„ μ•λ‚΄)
- **κ³ κ° λ§μ΅±λ„**: 3.5/5 β†’ 4.2/5 (νΈμμ„± μ¦λ€)

### κΈ°μ μ  μ„±κ³Ό
- **μ‹λ‚λ¦¬μ¤ λ³µμ΅λ„**: 15κ° μ¤ν…μ΄μ§€ β†’ 10κ° μ¤ν…μ΄μ§€
- **μ •λ³΄ μ¶”μ¶ μ •ν™•λ„**: ν‚¤μ›λ“ κΈ°λ° 90% λ‹¬μ„±
- **λ€ν™” νλ¦„ μ μ—°μ„±**: 3κ°€μ§€ μ§„ν–‰ λ°©μ‹ μ§€μ›

---

## π κ²°λ΅ 

μ΄λ² κ°μ„ μ„ ν†µν•΄ λ””λ”¤λ λ€μ¶ μƒλ‹΄ μ‹λ‚λ¦¬μ¤κ°€ **κΈ°κ³„μ μΈ λ‹¨κ³„λ³„ μ§λ¬Έ**μ—μ„ **μμ—°μ¤λ½κ³  ν¨μ¨μ μΈ λ€ν™”**λ΅ μ§„ν™”ν–μµλ‹λ‹¤. 

κ³ κ°μ€ μ΄μ  μμ‹ μ΄ νΈν• λ°©μ‹μΌλ΅ μ •λ³΄λ¥Ό μ κ³µν•  μ μμΌλ©°, μƒλ‹΄μ›(AI)μ€ μ§€λ¥μ μΌλ΅ μ •λ³΄λ¥Ό μμ§‘ν•κ³  μ²λ¦¬ν•μ—¬ λ” λ‚μ€ κ³ κ° κ²½ν—μ„ μ κ³µν•  μ μμµλ‹λ‹¤.

**ν•µμ‹¬ μ„±κ³Ό**: 5λ‹¨κ³„ κ°λ³„ μ§λ¬Έ β†’ 2λ‹¨κ³„ ν¨μ¨μ  μμ§‘μΌλ΅ **60% μ‹κ°„ λ‹¨μ¶•** λ° **μμ—°μ¤λ¬μ΄ λ€ν™” κ²½ν—** ν™•λ³΄